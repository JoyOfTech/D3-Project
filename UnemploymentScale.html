<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<title>D3: Unemployment By Ward</title>
<script type="text/javascript" src="d3/d3.js"></script>
<style type="text/css">
div.bar {
    display: inline-block;
    width: 20px;
    padding: 20px;
    border-spacing: 10px;
    height: 75px;   /* Gets overriden by D3-assigned height below */
    margin-right: 2px;
    background-color: purple;
        }      
</style>
</head>
<body>
<script type ="text/javascript">

var w =500;
var h = 100;
var svg = d3.select("body")
           .append("svg")
           .attr("width", w)
           .attr("height", h);

d3.csv("Unemployment.csv", function(data) {
    dataSet = data
    console.log(dataSet)

    var UnemploymentArray = [] 
    var WardArray = []               // Create and initialize two arrays to store values
    dataSet.forEach(function(d) {  // Loop through each object of keys/values in the dataSet from csv
     

     UnemploymentArray.push(+d.Unemployment); // Add each value to unemployement array
     WardArray.push(+d.Ward);  // Add each value to ward array 
    })

    console.log(UnemploymentArray)   // Log unemployment array in console to verify values
    console.log(WardArray)  // Log ward array in console to verify values 


    d3.select("body").selectAll("div")
        .data(UnemploymentArray)
        .enter()
        .append("div")
        .attr("class", "bar")
        .style("height", function(d) {
        var barHeight = d * 25;
        return barHeight + "px";
});

        //Create scale functions
      var xScale = d3.scale.linear()
                 .domain([0, d3.max(dataSet, function(d) { return d[0]; })])
                 .range([0, w]);
      var yScale = d3.scale.linear()
                 .domain([0, d3.max(dataSet, function(d) { return d[1]; })])
                 .range([0, h]);
  
      //Creating  SVG element
      var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);


      svg.selectAll("bar") // not sure what I should use here "Rect"/"bar"
         .data(dataSet)
         .enter()
         .append("bar")
         .attr("rx", function(d) {
            return xScale(d[0]);
         })
         .attr("ry", function(d) {
            return yScale(d[1]);
         
         });
      svg.selectAll("text") //not really sure of what this "text" refers to 
         .data(dataSet)
         .enter()
         .append("text")
         .text(function(d) {
            return d[0] + "," + d[1];
         })
         .attr("x", function(d) {
            return xScale(d[0]);
         })
         .attr("y", function(d) {
            return yScale(d[1]);
         })
         .attr("font-family", "sans-serif")
         .attr("font-size", "11px")
         .attr("fill", "white");

            /*svg.selectAll("")
               .data(dataSet)
               .enter()
               .append("text")
               .text(function(d) {
                    return d;
               })
               .attr("x", function(d, i) {
                    return i * (w / dataSet.length) + 5;
               })
               .attr("y", function(d) {
                    return h - (d * 4) + 15;
               })
               .attr("font-family", "sans-serif")
               .attr("font-size", "11px")
               .attr("fill", "white"); */




   });






</script>
</body>

</html>
